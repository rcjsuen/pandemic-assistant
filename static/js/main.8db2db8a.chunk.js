(this["webpackJsonppandemic-assistant"]=this["webpackJsonppandemic-assistant"]||[]).push([[1],{62:function(e,t,n){var r={"./ion-action-sheet.entry.js":[88,5],"./ion-alert.entry.js":[89,6],"./ion-app_8.entry.js":[90,7],"./ion-avatar_3.entry.js":[91,17],"./ion-back-button.entry.js":[92,18],"./ion-backdrop.entry.js":[93,44],"./ion-button_2.entry.js":[94,19],"./ion-card_5.entry.js":[95,20],"./ion-checkbox.entry.js":[96,21],"./ion-chip.entry.js":[97,22],"./ion-col_3.entry.js":[98,45],"./ion-datetime_3.entry.js":[99,10],"./ion-fab_3.entry.js":[100,23],"./ion-img.entry.js":[101,46],"./ion-infinite-scroll_2.entry.js":[102,47],"./ion-input.entry.js":[103,24],"./ion-item-option_3.entry.js":[104,25],"./ion-item_8.entry.js":[105,26],"./ion-loading.entry.js":[106,27],"./ion-menu_3.entry.js":[107,28],"./ion-modal.entry.js":[108,8],"./ion-nav_2.entry.js":[109,14],"./ion-popover.entry.js":[110,9],"./ion-progress-bar.entry.js":[111,29],"./ion-radio_2.entry.js":[112,30],"./ion-range.entry.js":[113,31],"./ion-refresher_2.entry.js":[114,11],"./ion-reorder_2.entry.js":[115,16],"./ion-ripple-effect.entry.js":[116,48],"./ion-route_4.entry.js":[117,32],"./ion-searchbar.entry.js":[118,33],"./ion-segment_2.entry.js":[119,34],"./ion-select_3.entry.js":[120,35],"./ion-slide_2.entry.js":[121,49],"./ion-spinner.entry.js":[122,13],"./ion-split-pane.entry.js":[123,50],"./ion-tab-bar_2.entry.js":[124,36],"./ion-tab_2.entry.js":[125,15],"./ion-text.entry.js":[126,37],"./ion-textarea.entry.js":[127,38],"./ion-toast.entry.js":[128,39],"./ion-toggle.entry.js":[129,12],"./ion-virtual-scroll.entry.js":[130,51]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=62,e.exports=i},64:function(e,t,n){var r={"./ion-icon.entry.js":[131,58]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return n.e(t[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=64,e.exports=i},72:function(e,t,n){},74:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),a=n(28),s=n.n(a),c=n(4),o=n(5),l=n(7),d=n(8),u=n(22),h=n(1),j=n(53),p=n(13),f=(n(72),n(0)),b=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(c.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.i,{icon:this.props.drawn?p.c:p.h,slot:"end"}),Object(f.jsxs)(h.p,{children:[this.props.label," ",this.props.position]})]},this.props.position)}}]),n}(i.a.Component),m=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).mounted=!1,r.handler=function(){r.mounted?r.setState({playerCards:r.props.controller.getRemainingPlayerCards(),epidemics:r.props.controller.getEpidemicsDrawn(),minCards:r.props.controller.getMinRemainder(),maxCards:r.props.controller.getMaxRemainder()}):r.state={playerCards:r.props.controller.getRemainingPlayerCards(),epidemics:r.props.controller.getEpidemicsDrawn(),minCards:r.props.controller.getMinRemainder(),maxCards:r.props.controller.getMaxRemainder()}},r.state={playerCards:r.props.controller.getRemainingPlayerCards(),epidemics:r.props.controller.getEpidemicsDrawn(),minCards:r.props.controller.getMinRemainder(),maxCards:r.props.controller.getMaxRemainder()},r.props.controller.attachPlayerDeckHandler(r.handler),r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.controller.detachPlayerDeckHandler(this.handler)}},{key:"render",value:function(){var e=this,t=Math.ceil(this.state.minCards/2),n=Math.ceil(this.state.maxCards/2),r=0!==this.state.epidemics.length&&this.state.epidemics.reduce((function(e,t){return e&&t})),i=0===this.props.controller.getSeason()?"Escalation":"Epidemic";return Object(f.jsxs)(h.q,{children:[Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Player Deck Size"}),Object(f.jsx)(h.r,{slot:"end",color:"dark",children:this.state.playerCards})]}),!r&&Object(f.jsxs)(h.k,{children:[Object(f.jsxs)(h.p,{children:["Cards to Next ",i]}),Object(f.jsx)(h.r,{slot:"end",color:"dark",children:0===this.state.minCards&&0===this.state.maxCards?"0":"".concat(this.state.minCards,"-").concat(this.state.maxCards)})]}),!r&&Object(f.jsxs)(h.k,{children:[Object(f.jsxs)(h.p,{children:["Rounds to Next ",i]}),Object(f.jsx)(h.r,{slot:"end",color:"dark",children:0===t&&0===n?"0":"".concat(t,"-").concat(n)})]}),this.state.epidemics.map((function(e,t){return Object(f.jsx)(b,{label:i,drawn:e,position:t+1},t)})),!r&&Object(f.jsx)(h.g,{children:Object(f.jsxs)(h.v,{children:[Object(f.jsx)(h.e,{}),Object(f.jsx)(h.e,{children:Object(f.jsx)(h.c,{disabled:this.state.minCards>0,color:"danger",expand:"block",onClick:function(){e.props.controller.drawPlayerDeck(!0)},children:Object(f.jsx)(h.i,{icon:p.s})})}),Object(f.jsx)(h.e,{children:Object(f.jsx)(h.c,{color:"success",expand:"block",onClick:function(){e.props.controller.drawPlayerDeck(!1)},children:Object(f.jsx)(h.i,{icon:p.l})})}),Object(f.jsx)(h.e,{})]})})]})}}]),n}(i.a.Component),g=function(e){var t=e.controller;return Object(f.jsxs)(h.s,{children:[Object(f.jsx)(h.h,{children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{children:0===t.getSeason()?"Escalations":"Epidemics"})})}),Object(f.jsxs)(h.f,{fullscreen:!0,children:[Object(f.jsx)(h.h,{collapse:"condense",children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{size:"large",children:0===t.getSeason()?"Escalations":"Epidemics"})})}),Object(f.jsx)(m,{controller:t})]})]})},y=(n(74),function(e){var t=e.season,n=e.city,r=e.onClick;return Object(f.jsxs)(h.k,{button:void 0!==r,onClick:r,children:[Object(f.jsx)(h.p,{children:n.getLabel(t)}),Object(f.jsx)(h.i,{icon:p.j,color:n.getColour(t),slot:"end"})]})}),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).mounted=!1,r.handler=function(){r.updateState()},r.state={filter:"all",groups:r.props.controller.getCityGroups(),discards:r.props.controller.getDiscards()},r.props.controller.attachInfectionDeckHandler(r.handler),r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.controller.detachInfectionDeckHandler(this.handler)}},{key:"updateState",value:function(){this.mounted?this.setState({groups:this.props.controller.getCityGroups(),discards:this.props.controller.getDiscards()}):this.state={filter:"all",groups:this.props.controller.getCityGroups(),discards:this.props.controller.getDiscards()}}},{key:"shouldShow",value:function(e){if("all"===this.state.filter)return!0;if("green"===this.state.filter)return e.isInfected();switch(e.getColour(this.props.season)){case"dark":return"black"===this.state.filter;case"danger":return"red"===this.state.filter;case"primary":return"blue"===this.state.filter;case"warning":return"yellow"===this.state.filter}return!1}},{key:"render",value:function(){var e=this,t=this.state.discards.length>0;return Object(f.jsxs)("div",{children:[Object(f.jsxs)(h.E,{children:[0===this.props.season&&Object(f.jsxs)(h.w,{value:this.state.filter,onIonChange:function(t){e.setState({filter:t.detail.value})},children:[Object(f.jsx)(h.x,{value:"all",children:"all"}),Object(f.jsx)(h.x,{value:"blue",children:"NATO"}),Object(f.jsx)(h.x,{value:"black",children:"neutral"}),Object(f.jsx)(h.x,{value:"red",children:"USSR"}),this.props.month>=3&&Object(f.jsx)(h.x,{value:"green",children:"infected"})]}),1===this.props.season&&Object(f.jsxs)(h.w,{value:this.state.filter,onIonChange:function(t){e.setState({filter:t.detail.value})},children:[Object(f.jsx)(h.x,{value:"all",children:"all"}),Object(f.jsx)(h.x,{value:"black",children:"black"}),Object(f.jsx)(h.x,{value:"blue",children:"blue"}),Object(f.jsx)(h.x,{value:"red",children:"red"}),Object(f.jsx)(h.x,{value:"yellow",children:"yellow"})]}),2===this.props.season&&Object(f.jsxs)(h.w,{value:this.state.filter,onIonChange:function(t){e.setState({filter:t.detail.value})},children:[Object(f.jsx)(h.x,{value:"all",children:"all"}),Object(f.jsx)(h.x,{value:"black",children:"black"}),Object(f.jsx)(h.x,{value:"blue",children:"blue"}),Object(f.jsx)(h.x,{value:"yellow",children:"yellow"})]})]}),Object(f.jsx)(h.g,{children:Object(f.jsxs)(h.v,{children:[Object(f.jsx)(h.e,{}),Object(f.jsx)(h.e,{children:Object(f.jsx)(h.c,{disabled:!t,expand:"block",onClick:function(){e.props.controller.intensify(),e.updateState()},children:"Intensify"})}),Object(f.jsx)(h.e,{})]})}),Object(f.jsxs)(h.q,{children:[t&&Object(f.jsx)(h.l,{sticky:!0,children:0===this.state.discards.length?"Discards":"Discards (".concat(this.state.discards.length,")")}),t&&this.state.discards.map((function(t,n){if(!e.shouldShow(t))return Object(f.jsx)("div",{},n);var r="discard-".concat(n);return Object(f.jsxs)(h.o,{id:r,children:[Object(f.jsx)(y,{season:e.props.season,city:t}),Object(f.jsx)(h.n,{side:"end",children:Object(f.jsx)(h.m,{color:"danger",onClick:function(){e.props.controller.removeInfectionCard(t),e.updateState(),document.getElementById(r).close()},children:"Remove"})})]},n)})),this.state.groups.map((function(t,n){var r="Group ".concat(n+1," (").concat(t.length,")");return n===e.state.groups.length-1?r="Deck":0===n&&(r="Current Group (".concat(t.length,")")),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.l,{sticky:!0,children:r}),t.map((function(t,n){return e.shouldShow(t)?Object(f.jsx)(y,{season:e.props.season,city:t,onClick:function(){e.props.controller.drawInfectionDeck(t),e.updateState()}},n):Object(f.jsx)("div",{},n)}))]},n)}))]})]})}}]),n}(i.a.Component),x=function(e){var t=e.controller;return Object(f.jsxs)(h.s,{children:[Object(f.jsx)(h.h,{children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{children:0===t.getSeason()?"Threats":"Infections"})})}),Object(f.jsxs)(h.f,{fullscreen:!0,children:[Object(f.jsx)(h.h,{collapse:"condense",children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{size:"large",children:0===t.getSeason()?"Threats":"Infections"})})}),Object(f.jsx)(v,{controller:t,season:t.getSeason(),month:t.getMonth()})]})]})},O=n(18),k=n(31),w=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(c.a)(this,e),this.name=t,this.flag=n,this.colours=r,this.region=i,this.infected=a}return Object(o.a)(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(e){return 2===e?this.name:this.infected?"\u2623\ufe0f ".concat(this.name," (").concat(this.region,")"):"".concat(this.flag," ").concat(this.name," (").concat(this.region,")")}},{key:"getColour",value:function(e){if(this.colours.length<2)throw new Error(this.name);return this.infected?"success":this.colours[e]}},{key:"infect",value:function(){return new e(this.name,this.flag,this.colours,this.region,!0)}},{key:"isInfected",value:function(){return this.infected}}]),e}(),C=new w("San Francisco","\ud83c\uddfa\ud83c\uddf8",["primary","primary"],"North America"),D=new w("Chicago","\ud83c\uddfa\ud83c\uddf8",["primary","primary"],"North America"),S=new w("Montreal","\ud83c\udde8\ud83c\udde6",["primary","primary"],"North America"),A=new w("Atlanta","\ud83c\uddfa\ud83c\uddf8",["primary","primary"],"North America"),E=new w("New York","\ud83c\uddfa\ud83c\uddf8",["primary","primary","primary"],"North America"),N=new w("Washington DC","\ud83c\uddfa\ud83c\uddf8",["primary","primary"],"North America"),I=new w("London","\ud83c\uddec\ud83c\udde7",["primary","primary","primary"],"Europe"),z=new w("Paris","\ud83c\udde8\ud83c\uddf5",["primary","primary"],"Europe"),M=new w("Madrid","\ud83c\uddea\ud83c\uddf8",["dark","primary"],"Europe"),P=new w("Essen","\ud83c\udde9\ud83c\uddea",["primary","primary"],"Europe"),R=new w("St. Petersburg","\ud83c\uddf7\ud83c\uddfa",["primary","primary"],"Europe"),H=new w("Milan","\ud83c\uddee\ud83c\uddf9",["primary","primary"],"Europe"),B=new w("Los Angeles","\ud83c\uddfa\ud83c\uddf8",["primary","warning"],"North America"),T=new w("Miami","\ud83c\uddfa\ud83c\uddf8",["warning","warning"],"North America"),_=new w("Mexico City","\ud83c\uddf2\ud83c\uddfd",["dark","warning"],"North America"),L=new w("Bogota","\ud83c\udde8\ud83c\uddf4",["dark","warning"],"South America"),G=new w("Sao Paolo","\ud83c\udde7\ud83c\uddf7",["warning","warning"],"South America"),J=new w("Buenos Aires","\ud83c\udde6\ud83c\uddf7",["dark","warning"],"South America"),F=new w("Lima","\ud83c\uddf5\ud83c\uddea",["dark","warning"],"South America"),U=new w("Santiago","\ud83c\udde8\ud83c\uddf1",["dark","warning"],"South America"),W=new w("Lagos","\ud83c\uddf3\ud83c\uddec",["dark","warning","warning"],"Africa"),Z=new w("Kinshasa","\ud83c\udde8\ud83c\udde9",["warning","warning"],"Africa"),K=new w("Johannesburg","\ud83c\uddff\ud83c\udde6",["primary","warning"],"Africa"),q=new w("Khartoum","\ud83c\uddf8\ud83c\udde9",["dark","warning"],"Africa"),Y=new w("Moscow","\ud83c\uddf7\ud83c\uddfa",["danger","dark"],"Europe"),$=new w("Algiers","\ud83c\udde9\ud83c\uddff",["primary","dark"],"Africa"),Q=new w("Riyadh","\ud83c\uddf8\ud83c\udde6",["dark","dark"],"Asia"),V=new w("Baghdad","\ud83c\uddee\ud83c\uddf6",["danger","dark"],"Asia"),X=new w("Tehran","\ud83c\uddee\ud83c\uddf7",["dark","dark"],"Asia"),ee=new w("Cairo","\ud83c\uddea\ud83c\uddec",["danger","dark","dark"],"Asia"),te=new w("Istanbul","\ud83c\uddf9\ud83c\uddf7",["primary","dark","dark"],"Europe"),ne=new w("Karachi","\ud83c\uddf5\ud83c\uddf0",["dark","dark"],"Asia"),re=new w("Delhi","\ud83c\uddee\ud83c\uddf3",["dark","dark"],"Asia"),ie=new w("Mumbai","\ud83c\uddee\ud83c\uddf3",["dark","dark"],"Asia"),ae=new w("Chennai","\ud83c\uddee\ud83c\uddf3",["dark","dark"],"Asia"),se=new w("Kolkata","\ud83c\uddee\ud83c\uddf3",["dark","dark"],"Asia"),ce=new w("Beijing","\ud83c\udde8\ud83c\uddf3",["danger","danger"],"Asia"),oe=new w("Shanghai","\ud83c\udde8\ud83c\uddf3",["danger","danger"],"Asia"),le=new w("Hong Kong","\ud83c\udded\ud83c\uddf0",["danger","danger"],"Asia"),de=new w("Taipei","\ud83c\uddf9\ud83c\uddfc",["danger","danger"],"Asia"),ue=new w("Bangkok","\ud83c\uddf9\ud83c\udded",["dark","danger"],"Asia"),he=new w("Manila","\ud83c\uddf5\ud83c\udded",["dark","danger"],"Pacific Rim"),je=new w("Jakarta","\ud83c\uddee\ud83c\udde9",["dark","danger"],"Pacific Rim"),pe=new w("Ho Chi Minh City","\ud83c\uddfb\ud83c\uddf3",["danger","danger"],"Pacific Rim"),fe=new w("Seoul","\ud83c\uddf0\ud83c\uddf7",["danger","danger"],"Pacific Rim"),be=new w("Tokyo","\ud83c\uddef\ud83c\uddf5",["dark","danger"],"Pacific Rim"),me=new w("Osaka","\ud83c\uddef\ud83c\uddf5",["dark","danger"],"Pacific Rim"),ge=new w("Sydney","\ud83c\udde6\ud83c\uddfa",["primary","danger"],"Pacific Rim"),ye=new w("Leopoldville","\ud83c\udde8\ud83c\udde9",["danger","danger"],"Africa"),ve=new w("Bombay","\ud83c\uddee\ud83c\uddf3",["danger","danger"],"Asia"),xe=new w("Calcutta","\ud83c\uddee\ud83c\uddf3",["dark","dark"],"Asia"),Oe=new w("Hanoi","\ud83c\uddfb\ud83c\uddf3",["danger","danger"],"Asia"),ke=new w("Novosibirsk","\ud83c\uddf7\ud83c\uddfa",["danger","danger"],"Asia"),we=new w("Peking","\ud83c\udde8\ud83c\uddf3",["danger","danger"],"Asia"),Ce=new w("Pyongyang","\ud83c\uddf0\ud83c\uddf5",["danger","danger"],"Asia"),De=new w("Saigon","\ud83c\uddfb\ud83c\uddf3",["primary","primary"],"Asia"),Se=new w("East Berlin","\ud83c\udde9\ud83c\uddea",["danger","danger"],"Europe"),Ae=new w("Kiev","\ud83c\uddfa\ud83c\udde6",["danger","danger"],"Europe"),Ee=new w("Leningrad","\ud83c\uddf7\ud83c\uddfa",["danger","danger"],"Europe"),Ne=new w("Prague","\ud83c\udde8\ud83c\uddff",["danger","danger"],"Europe"),Ie=new w("Rome","\ud83c\uddee\ud83c\uddf9",["primary","primary"],"Europe"),ze=new w("Warsaw","\ud83c\uddf5\ud83c\uddf1",["danger","danger"],"Europe"),Me=new w("Havana","\ud83c\udde8\ud83c\uddfa",["danger","danger"],"North America"),Pe=new w("Toronto","\ud83c\udde8\ud83c\udde6",["primary","primary"],"North America"),Re=new w("Washington","\ud83c\uddfa\ud83c\uddf8",["primary","primary","primary"],"North America"),He=new w("Sao Paulo","\ud83c\udde7\ud83c\uddf7",["dark","dark","warning"],"South America"),Be=new w("Tripoli","\ud83c\uddf1\ud83c\uddfe",["dark","dark","dark"],"Africa"),Te=new w("Jacksonville","\ud83c\uddfa\ud83c\uddf8",["warning","warning","warning"],"North America");function _e(e){switch(e){case $.getName():return $.infect();case ee.getName():return ee.infect();case K.getName():return K.infect();case q.getName():return q.infect();case W.getName():return W.infect();case ye.getName():return ye.infect();case L.getName():return L.infect();case J.getName():return J.infect();case F.getName():return F.infect();case U.getName():return U.infect();case He.getName():return He.infect()}throw new Error(e)}var Le=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.groups=void 0,this.discards=[],this.groups=[[]];var i,a=Object(k.a)(function(e){return 2===e?[I,I,I,E,E,E,Re,Re,Re,ee,ee,ee,te,te,te,Be,Be,Be,Te,Te,Te,W,W,W,He,He,He]:0===e?[C,Pe,E,B,A,Re,_,Me,L,F,He,U,J,I,Se,z,M,ze,Ee,Y,Ie,te,Ne,Ae,$,W,ee,q,ye,K,ke,we,Ce,re,V,ne,Q,Oe,xe,oe,ve,ue,De,me,be,ge,he,je]:[C,D,S,A,E,N,I,z,M,P,R,H,B,T,_,L,G,J,F,U,W,Z,K,q,Y,$,Q,V,X,ee,te,ne,re,ie,ae,se,ce,oe,le,de,ue,he,je,pe,fe,be,me,ge]}(t));try{for(a.s();!(i=a.n()).done;){var s=i.value;this.groups[0].push(s)}}catch(o){a.e(o)}finally{a.f()}n.africaThreatCards.forEach((function(e){r.discards.push(_e(e))})),n.southAmericaThreatCards.forEach((function(e){r.discards.push(_e(e))})),this.groups[0].sort((function(e,t){return e.getName().localeCompare(t.getName())})),this.discards.sort((function(e,t){return e.getName().localeCompare(t.getName())}))}return Object(o.a)(e,[{key:"draw",value:function(e){this.discards.push(e),this.discards.sort((function(e,t){return e.getName().localeCompare(t.getName())}));var t,n=Object(k.a)(this.groups);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.indexOf(e);if(-1!==i){r.splice(i,1),0===r.length&&this.groups.splice(0,1);break}}}catch(a){n.e(a)}finally{n.f()}}},{key:"intensify",value:function(){this.groups.splice(0,0,this.discards),this.discards=[]}},{key:"removeInfectionCard",value:function(e){var t=this.discards.indexOf(e);if(-1===t)throw new Error("Can only remove a card that is in the discard pile");this.discards.splice(t,1)}},{key:"getCityGroups",value:function(){return this.groups}},{key:"getDiscards",value:function(){return this.discards}},{key:"hasDiscards",value:function(){return this.discards.length>0}}]),e}(),Ge=function(){function e(t,n,r,i){Object(c.a)(this,e),this.playerCount=t,this.counts=[],this.drawnEpidemics=[],this.drawnCards=0,this.drawnCurrentBucket=0,this.deck=void 0,this.currentBucket=void 0;var a=48+n+r-i;this.deck=a-this.getStartingRemoval();var s=this.deck,o=r;for(this.counts=[];o>0;){var l=Math.floor(s/o);s-=Math.floor(l),o--,this.counts.push(l),this.drawnEpidemics.push(!1)}this.currentBucket=this.counts.length-1}return Object(o.a)(e,[{key:"getRemainingCards",value:function(){return this.deck}},{key:"draw",value:function(e){if(this.drawnCards++,this.drawnCurrentBucket++,e){if(this.drawnEpidemics[this.currentBucket])throw new Error("Already drew an epidemic for this bucket");this.drawnEpidemics[this.currentBucket]=!0}for(var t=this.deck-this.drawnCards,n=0,r=0;r<this.counts.length;r++){if((n+=this.counts[r])>t)return;if(n==t)return this.currentBucket--,void(this.drawnCurrentBucket=0)}}},{key:"getMinRemainder",value:function(){return this.drawnEpidemics[this.currentBucket]?this.counts[this.currentBucket]-this.drawnCurrentBucket:0}},{key:"getMaxRemainder",value:function(){return this.drawnEpidemics[this.currentBucket]?this.counts[this.currentBucket]-this.drawnCurrentBucket+this.counts[this.currentBucket-1]-1:this.counts[this.currentBucket]-this.drawnCurrentBucket-1}},{key:"getCounts",value:function(){return this.counts}},{key:"getStartingRemoval",value:function(){return 3===this.playerCount?9:8}}]),e}(),Je=function(){function e(){Object(c.a)(this,e),this.playerDeck=void 0,this.infectionDeck=void 0,this.epidemicsDrawn=[],this.epidemicsDrawnIndex=0,this.season=0,this.month=0,this.playerDeck=new Ge(2,2,5,0),this.infectionDeck=new Le(1,{africaThreatCards:[],southAmericaThreatCards:[]})}return Object(o.a)(e,[{key:"setup",value:function(e,t,n,r,i,a,s){this.season=e,this.month=t,this.playerDeck=new Ge(n,r,i,a),this.infectionDeck=new Le(e,s),this.epidemicsDrawn=[];for(var c=0;c<i;c++)this.epidemicsDrawn.push(!1);this.epidemicsDrawnIndex=0}},{key:"getRemainingPlayerCards",value:function(){return this.playerDeck.getRemainingCards()}},{key:"getMinRemainder",value:function(){return this.playerDeck.getMinRemainder()}},{key:"getMaxRemainder",value:function(){return this.playerDeck.getMaxRemainder()}},{key:"drawPlayerDeck",value:function(e){this.playerDeck.draw(e),e&&(this.epidemicsDrawn[this.epidemicsDrawnIndex]=!0,this.epidemicsDrawnIndex++)}},{key:"drawInfectionDeck",value:function(e){this.infectionDeck.draw(e)}},{key:"removeInfectionCard",value:function(e){this.infectionDeck.removeInfectionCard(e)}},{key:"intensify",value:function(){this.infectionDeck.intensify()}},{key:"getCityGroups",value:function(){return this.infectionDeck.getCityGroups()}},{key:"getDiscards",value:function(){return this.infectionDeck.getDiscards()}},{key:"getEpidemicsDrawn",value:function(){return this.epidemicsDrawn}},{key:"getSeason",value:function(){return this.season}},{key:"getMonth",value:function(){return this.month}}]),e}(),Fe=(new Je,new(function(){function e(){Object(c.a)(this,e),this.playerDeckHandlers=[],this.infectionDeckHandlers=[],this.assistant=void 0,this.assistant=new Je}return Object(o.a)(e,[{key:"attachPlayerDeckHandler",value:function(e){this.playerDeckHandlers.push(e)}},{key:"attachInfectionDeckHandler",value:function(e){this.infectionDeckHandlers.push(e)}},{key:"detachPlayerDeckHandler",value:function(e){var t=this.playerDeckHandlers.indexOf(e);-1!==t&&this.playerDeckHandlers.splice(t,1)}},{key:"detachInfectionDeckHandler",value:function(e){var t=this.infectionDeckHandlers.indexOf(e);-1!==t&&this.infectionDeckHandlers.splice(t,1)}},{key:"notifyHandlers",value:function(e){e.forEach((function(e){e()}))}},{key:"notifyPlayerDeckHandlers",value:function(){this.notifyHandlers(this.playerDeckHandlers)}},{key:"notifyInfectionDeckHandlers",value:function(){this.notifyHandlers(this.infectionDeckHandlers)}},{key:"setup",value:function(e,t,n,r,i,a,s){this.assistant.setup(e,t,n,r,i,a,s),this.notifyPlayerDeckHandlers(),this.notifyInfectionDeckHandlers()}},{key:"drawPlayerDeck",value:function(e){this.assistant.drawPlayerDeck(e),this.notifyPlayerDeckHandlers()}},{key:"drawInfectionDeck",value:function(e){this.assistant.drawInfectionDeck(e)}},{key:"removeInfectionCard",value:function(e){this.assistant.removeInfectionCard(e)}},{key:"intensify",value:function(){this.assistant.intensify()}},{key:"getRemainingPlayerCards",value:function(){return this.assistant.getRemainingPlayerCards()}},{key:"getCityGroups",value:function(){return this.assistant.getCityGroups()}},{key:"getDiscards",value:function(){return this.assistant.getDiscards()}},{key:"getEpidemicsDrawn",value:function(){return this.assistant.getEpidemicsDrawn()}},{key:"getMinRemainder",value:function(){return this.assistant.getMinRemainder()}},{key:"getMaxRemainder",value:function(){return this.assistant.getMaxRemainder()}},{key:"getSeason",value:function(){return this.assistant.getSeason()}},{key:"getMonth",value:function(){return this.assistant.getMonth()}}]),e}())),Ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={season:0},O.a.get({key:"setup"}).then((function(e){O.a.get({key:"initialized"}).then((function(t){if("false"===t.value){var n=JSON.parse(e.value);Fe.setup(n.season,n.month,n.playerCount,n.eventCards,n.epidemicCards,n.objectiveCards,n.seasonZeroConfiguration),O.a.set({key:"initialized",value:"true"})}}))})),r}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(h.C,{children:[Object(f.jsxs)(h.u,{children:[Object(f.jsx)(u.a,{exact:!0,path:"/epidemics",children:Object(f.jsx)(g,{controller:Fe})}),Object(f.jsx)(u.a,{exact:!0,path:"/infections",children:Object(f.jsx)(x,{controller:Fe})})]}),Object(f.jsxs)(h.A,{slot:"bottom",children:[Object(f.jsxs)(h.B,{tab:"epidemics",href:"/epidemics",children:[Object(f.jsx)(h.i,{icon:p.s}),Object(f.jsx)(h.p,{children:0===this.state.season?"Escalations":"Epidemics"})]}),Object(f.jsxs)(h.B,{tab:"infections",href:"/infections",children:[Object(f.jsx)(h.i,{icon:p.k}),Object(f.jsx)(h.p,{children:0===this.state.season?"Threats":"Infections"})]})]})]})}}]),n}(i.a.Component),We=n(6),Ze=n.n(We),Ke=n(12),qe=function(e){var t=Object(h.N)();return Object(f.jsx)(h.c,{expand:"block",onClick:Object(Ke.a)(Ze.a.mark((function n(){return Ze.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.set({key:"season",value:String(e.season)});case 2:return n.next=4,O.a.set({key:"playerCount",value:String(e.playerCount)});case 4:return n.next=6,O.a.set({key:"month",value:String(e.month)});case 6:t.push("/setup/".concat(e.season));case 7:case"end":return n.stop()}}),n)}))),children:"Next"})},Ye=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={season:0,month:1,playerCount:2},r}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsxs)(h.s,{children:[Object(f.jsx)(h.h,{children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{children:"Pandemic Assistant"})})}),Object(f.jsxs)(h.f,{fullscreen:!0,children:[Object(f.jsx)(h.h,{collapse:"condense",children:Object(f.jsx)(h.E,{children:Object(f.jsx)(h.D,{size:"large",children:"Pandemic Assistant"})})}),Object(f.jsxs)(h.q,{children:[Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Season"}),Object(f.jsxs)(h.y,{value:String(this.state.season),interface:"popover",onIonChange:function(t){e.setState({season:Number(t.detail.value)})},children:[Object(f.jsx)(h.z,{value:"0",children:"0"}),Object(f.jsx)(h.z,{value:"1",children:"1"}),Object(f.jsx)(h.z,{value:"2",children:"2"})]})]}),Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Player Count"}),Object(f.jsxs)(h.y,{value:String(this.state.playerCount),interface:"popover",onIonChange:function(t){e.setState({playerCount:Number(t.detail.value)})},children:[Object(f.jsx)(h.z,{value:"1",children:"1"}),Object(f.jsx)(h.z,{value:"2",children:"2"}),Object(f.jsx)(h.z,{value:"3",children:"3"}),Object(f.jsx)(h.z,{value:"4",children:"4"}),Object(f.jsx)(h.z,{value:"5",children:"5"})]})]}),Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Month"}),Object(f.jsxs)(h.y,{value:String(this.state.month),interface:"popover",onIonChange:function(t){e.setState({month:Number(t.detail.value)})},children:[Object(f.jsx)(h.z,{value:"0",children:"Prologue"}),Object(f.jsx)(h.z,{value:"1",children:"January"}),Object(f.jsx)(h.z,{value:"2",children:"February"}),Object(f.jsx)(h.z,{value:"3",children:"March"}),Object(f.jsx)(h.z,{value:"4",children:"April"}),Object(f.jsx)(h.z,{value:"5",children:"May"}),Object(f.jsx)(h.z,{value:"6",children:"June"}),Object(f.jsx)(h.z,{value:"7",children:"July"}),Object(f.jsx)(h.z,{value:"8",children:"August"}),Object(f.jsx)(h.z,{value:"9",children:"September"}),Object(f.jsx)(h.z,{value:"10",children:"October"}),Object(f.jsx)(h.z,{value:"11",children:"November"}),Object(f.jsx)(h.z,{value:"12",children:"December"})]})]}),Object(f.jsx)(h.g,{children:Object(f.jsxs)(h.v,{children:[Object(f.jsx)(h.e,{}),Object(f.jsx)(h.e,{children:Object(f.jsx)(qe,{season:this.state.season,playerCount:this.state.playerCount,month:this.state.month})}),Object(f.jsx)(h.e,{})]})})]})]})]})}}]),n}(i.a.Component),$e=(n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(10));function Qe(e){var t=[];e.seasonZeroConfiguration.africaThreatCards.forEach((function(e){t.push(e.getName())}));var n=[];return e.seasonZeroConfiguration.southAmericaThreatCards.forEach((function(e){n.push(e.getName())})),{season:e.season,playerCount:e.playerCount,month:e.month,eventCards:e.eventCards,epidemicCards:e.epidemicCards,objectiveCards:e.objectiveCards,seasonZeroConfiguration:{africaThreatCards:t,southAmericaThreatCards:n}}}var Ve=function(e){var t=Object(h.N)();return Object(f.jsx)(h.c,{expand:"block",onClick:Object(Ke.a)(Ze.a.mark((function n(){return Ze.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.set({key:"initialized",value:"false"});case 2:return n.next=4,O.a.set({key:"setup",value:JSON.stringify(Qe(e.config))});case 4:t.push("/epidemics");case 5:case"end":return n.stop()}}),n)}))),children:"Start"})},Xe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={season:0,playerCount:4,month:1,eventCards:4,epidemicCards:5,objectiveCards:0,seasonZeroConfiguration:{africaThreatCards:new Set,southAmericaThreatCards:new Set}},O.a.get({key:"season"}).then((function(e){var t=Number(e.value);0===t?r.setState({season:t,epidemicCards:5}):r.setState({season:t})})),O.a.get({key:"playerCount"}).then((function(e){r.setState({playerCount:Number(e.value)})})),O.a.get({key:"month"}).then((function(e){r.setState({month:Number(e.value)})})),r.updateExtraThreatCards.bind(Object($e.a)(r)),r}return Object(o.a)(n,[{key:"updateExtraThreatCards",value:function(e,t){e.clear();var n,r=Object(k.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.add(i)}}catch(a){r.e(a)}finally{r.f()}}},{key:"createInfectionSelection",value:function(e,t,n,r){var i=this;return 0===this.state.season&&this.state.month>=e?Object(f.jsxs)(h.k,{children:[Object(f.jsxs)(h.p,{children:["Infected Cities (",t,")"]}),Object(f.jsx)(h.y,{multiple:!0,interface:"popover",onIonChange:function(e){i.updateExtraThreatCards(n,e.detail.value)},children:r.map((function(e){return Object(f.jsx)(h.z,{value:e,children:e.getName()},e.getName())}))})]}):Object(f.jsx)("div",{})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)(h.s,{children:[Object(f.jsx)(h.h,{children:Object(f.jsxs)(h.E,{children:[Object(f.jsx)(h.d,{slot:"start",children:Object(f.jsx)(h.b,{defaultHref:"/"})}),Object(f.jsxs)(h.D,{children:["Season ",this.state.season]})]})}),Object(f.jsx)(h.f,{fullscreen:!0,children:Object(f.jsxs)(h.q,{children:[Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Event Cards"}),Object(f.jsxs)(h.y,{value:String(this.state.eventCards),interface:"popover",onIonChange:function(t){e.setState({eventCards:Number(t.detail.value)})},children:[Object(f.jsx)(h.z,{value:"0",children:"0"}),Object(f.jsx)(h.z,{value:"1",children:"1"}),Object(f.jsx)(h.z,{value:"2",children:"2"}),Object(f.jsx)(h.z,{value:"3",children:"3"}),Object(f.jsx)(h.z,{value:"4",children:"4"}),Object(f.jsx)(h.z,{value:"5",children:"5"}),Object(f.jsx)(h.z,{value:"6",children:"6"}),Object(f.jsx)(h.z,{value:"7",children:"7"}),Object(f.jsx)(h.z,{value:"8",children:"8"})]})]}),0===this.state.season&&Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Objective Cards"}),Object(f.jsx)(h.j,{type:"number",value:this.state.objectiveCards,placeholder:"Enter Number",min:"0",onIonChange:function(t){return e.setState({objectiveCards:Number(t.detail.value)})}})]}),0!==this.state.season&&Object(f.jsxs)(h.k,{children:[Object(f.jsx)(h.p,{children:"Epidemics"}),Object(f.jsxs)(h.y,{value:String(this.state.epidemicCards),interface:"popover",onIonChange:function(t){e.setState({epidemicCards:Number(t.detail.value)})},children:[Object(f.jsx)(h.z,{value:"4",children:"4"}),Object(f.jsx)(h.z,{value:"5",children:"5"}),Object(f.jsx)(h.z,{value:"6",children:"6"}),Object(f.jsx)(h.z,{value:"7",children:"7"})]})]}),this.createInfectionSelection(3,"Africa",this.state.seasonZeroConfiguration.africaThreatCards,[$.infect(),ee.infect(),K.infect(),q.infect(),W.infect(),ye.infect()]),this.createInfectionSelection(5,"South America",this.state.seasonZeroConfiguration.southAmericaThreatCards,[L.infect(),J.infect(),F.infect(),U.infect(),He.infect()]),Object(f.jsx)(h.g,{children:Object(f.jsxs)(h.v,{children:[Object(f.jsx)(h.e,{}),Object(f.jsx)(h.e,{children:Object(f.jsx)(Ve,{config:this.state})}),Object(f.jsx)(h.e,{})]})})]})})]})}}]),n}(i.a.Component),et=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)(h.a,{children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(u.a,{path:"/",component:Ye,exact:!0}),Object(f.jsx)(u.a,{path:"/setup/:id",component:Xe,exact:!0}),Object(f.jsx)(u.a,{path:"/epidemics",component:Ue,exact:!0}),Object(f.jsx)(u.a,{path:"/infections",component:Ue,exact:!0})]})})}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=function(e){e&&e instanceof Function&&n.e(59).then(n.bind(null,149)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};s.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(et,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),tt()}},[[86,3,4]]]);
//# sourceMappingURL=main.8db2db8a.chunk.js.map